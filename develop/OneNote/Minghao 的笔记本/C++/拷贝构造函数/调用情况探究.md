调用几次拷贝构造

![Exported image](Exported%20image%2020260212172202-0.png)

在上面的代码中，我没有实现移动构造函数（与将移动构造函数声明为delete是不一样的概念，后者移动构造函数还是会参与重载决议的，并不能避免），观察第43行代码调用，会调用拷贝构造函数吗，如果我一定要使用拷贝构造函数呢， 会调用几次，为什么？

1. 默认情况下，不一定会调用拷贝构造函数，因为编译器会存在NRVO(==Named Return Value Optimization==，命名返回值优化)/RVO(非命名返回值优化)，直接在 obj1 的空间内进行构造
2. 在编译时使用-fno-elide-constructors来禁止省略，同时不声明移动构造函数（声明为delete也不行）
3. 在C++11/14上会调用2次拷贝构造函数吗，在C++17及以上会调用1次，因为C++17及以上存在prvalue 直接初始化目标（所谓“临时物化变化/强制消除”），所以只留下了函数内部的return那一步，函数外的赋值那一步被省略了  
![Exported image](Exported%20image%2020260212172203-1.png)